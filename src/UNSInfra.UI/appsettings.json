{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.EntityFrameworkCore": "Information"
    }
  },
  "AllowedHosts": "*",
  "Storage": {
    "Provider": "SQLite",
    "ConnectionString": "Data Source=unsinfra.db;Cache=Shared;Pooling=True;",
    "EnableWalMode": true,
    "CommandTimeoutSeconds": 30,
    "CacheSize": 1000,
    "Comment": "Provider options: SQLite, InMemory. IRealtimeStorage is always InMemory for performance."
  },
  "HistoricalStorage": {
    "Enabled": true,
    "StorageType": "InMemory",
    "ConnectionString": "",
    "InMemory": {
      "MaxValuesPerDataPoint": 1000,
      "MaxTotalValues": 100000,
      "AutoCleanup": true
    },
    "SQLite": {
      "DatabasePath": "",
      "EnableWAL": true,
      "RetentionDays": 365,
      "AutoCleanup": true
    }
  },
  "Mqtt": {
    "BrokerHost": "test.mosquitto.org",
    "BrokerPort": 1883,
    "UseTls": false,
    "ClientId": "UNSInfra-UI-Client",
    "Username": "",
    "Password": "",
    "KeepAliveInterval": 60,
    "ConnectionTimeout": 30,
    "CleanSession": true,
    "MaxReconnectAttempts": 10,
    "ReconnectDelay": 5,
    "AutoReconnect": true,
    "MessageBufferSize": 1000,
    "EnableDetailedLogging": true,
    "TlsConfiguration": {
      "ClientCertificatePath": "",
      "ClientCertificatePassword": "",
      "CaCertificatePath": "",
      "AllowUntrustedCertificates": false,
      "IgnoreCertificateChainErrors": false,
      "IgnoreCertificateRevocationErrors": false,
      "TlsVersion": "1.2"
    },
    "LastWillConfiguration": {
      "Topic": "uns/status/ui-client",
      "Payload": "{\"status\": \"offline\", \"timestamp\": \"{{timestamp}}\"}",
      "QualityOfServiceLevel": 1,
      "Retain": true,
      "DelayInterval": 0
    }
  },
  "SocketIO": {
    "ServerUrl": "https://virtualfactory.online:3000",
    "ConnectionTimeoutSeconds": 10,
    "EnableReconnection": true,
    "ReconnectionAttempts": 5,
    "ReconnectionDelaySeconds": 2,
    "EventNames": ["update"],
    "BaseTopicPath": "virtualfactory",
    "EnableDetailedLogging": true
  },
  "AutoMapping": {
    "Enabled": true,
    "MinimumConfidence": 0.7,
    "MaxSearchDepth": 8,
    "CreateMissingNodes": false,
    "CaseSensitive": false,
    "StripPrefixes": ["mqtt/", "socketio/", "kafka/"],
    "GlobalRules": [
      {
        "TopicPattern": "([^/]+)/([^/]+)/([^/]+)/?.*",
        "UNSPathTemplate": "{0}/{1}/{2}",
        "Confidence": 0.7,
        "IsActive": true,
        "Description": "Generic three-level hierarchy pattern (Enterprise/Site/Area)"
      }
    ],
    "SourceSpecificRules": {
      "SocketIO": [
        {
          "TopicPattern": "update/([^/]+)/([^/]+)/?.*",
          "UNSPathTemplate": "{0}/{1}",
          "Confidence": 0.9,
          "IsActive": true,
          "Description": "SocketIO update event pattern (Enterprise/OEE format)"
        }
      ],
      "MQTT": [
        {
          "TopicPattern": "spBv1\\.0/([^/]+)/[^/]+/([^/]+)/?.*",
          "UNSPathTemplate": "{0}/{1}",
          "Confidence": 0.95,
          "IsActive": true,
          "Description": "Sparkplug B topic pattern (Group/EdgeNode)"
        }
      ]
    },
    "ExcludedSourceTypes": [],
    "ExcludedTopicPatterns": [
      "^\\$.*",
      ".*\\/\\$.*"
    ]
  }
}
